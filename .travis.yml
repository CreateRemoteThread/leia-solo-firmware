language: c
addons:
  apt:
    update: true
    packages:
      - make
      - gcc
      - build-essential
      - libc6-dev
      - libgcc1
      - wget
      - bzip2
  sonarcloud:
    organization: "h2lab"
    token:
      secure: "CWEwzTXee5whyoJxHXZY/KOHO9iu01sseDL//PX7atotwU6OjrXp5hhAQoiNNufMSh73VfRuz/V88CbXVTk2oijcpdyq6BFbpDzjWSqdy2ME7M9/Hph1ax+asH6kCiT7Qdf5NWFe//ej1P6QEIN7X4789+UOvT0qHVLGbaGzCYy6oSz/KTkvOvJ5KQxcFLQY4680uPPjwoNbXY6A4c7ucwiVFIIJEQ1wkE59/xTeDCT1eA7xxI+jkbJTEBx1bXCjt5x8UI2pNg8VVFazcxQkMh7eyc8Z7VW6mOnF74IUfMxKHeU4k7aAzRVOsRTVFYoNQpdkfwhRZtpOYQd2Q4w4rhW74L/q+jK5IUwWrPA/j+y157fvdyKEX+Ybv1+dJci4zpzeGw0N5qr7bh4WnYmz2o1VjcIMwAD4CssAzSDLmYBZV+CnVaHJq50B+Ro+JjJ9zoUO262KlZ5xqXqETGNelUc8V7uqQNKF+YwAphIuDRQ4DAahFm/j7xjgeC49sxDkAkVwlMnuvohb5Ij1XZYFy7tLyDTC3S53RrZRRaGDEFVH4S3riEF+HArZl7DeZb+nvd8w2UFM2L+Ma1gGXoKw2uKnfGvSlibyWflMWycz0QcHXupzko89I8afPgurk/egq77XSx9QqAHemNWGcNVM0ZvysM2k/vT0aNjfdhnB45I="


# requested env for cross-compilation
env:
  global:
    - TRAVIS_COMPILER: arm-none-eabi-gcc
    - CC: arm-none-eabi-gcc
    - LD: arm-none-eabi-ld
    - CROSS_COMPILE: arm-none-eabi-

script:
  - wget -O gcc-arm-none-eabi-10-2020-q4-major-x86_64-linux.tar.bz2 "https://developer.arm.com/-/media/Files/downloads/gnu-rm/10-2020q4/gcc-arm-none-eabi-10-2020-q4-major-x86_64-linux.tar.bz2?revision=ca0cbf9c-9de2-491c-ac48-898b5bbc0443&la=en&hash=68760A8AE66026BCF99F05AC017A6A50C6FD832A"
  - tar xf gcc-arm-none-eabi-10-2020-q4-major-x86_64-linux.tar.bz2
  - export PATH=$PWD/gcc-arm-none-eabi-10-2020-q4-major/bin:$PATH
  - make clean
  # Wraps the compilation with the Build Wrapper to generate configuration (used
  # later by the SonarScanner) into the "bw-output" folder
  - build-wrapper-linux-x86-64 --out-dir bw-output make all
  # And finally run the SonarCloud analysis - read the "sonar-project.properties"
  # file to see the specific configuration
  - sonar-scanner -Dsonar.cfamily.build-wrapper-output=bw-output

notifications:
  email: false
