before_install:
  - sudo apt-get -y install gcc-arm-none-eabi
addons:
  apt:
    update: true
  sonarcloud:
    organization: "h2lab"
    token:
      secure: "EjzlRDkCWlDhLI9V1oNrI6cn/dri1rzJ9NYiA/Yu31EylMEnO9oprBygaDESrdMBjPRtdlecI+qFiAPbeHIV/6bk3LtDlj5EH9PK2s5vBGFbLV1Clw1c2AVRcBfWLEGvzoBewY/gMM5g+u68Tuv1SkLdbqiP+U9dS1dxPBioHShV+BJXD+m4hGd2Akg5HzmleV4VZcZ68VOzJIsn8aAR+DQqC+knde/K/qrd5PRNFN7evG0mINXKJh9Hmjls6tBPsOUUI0i6anowy9V5Xow4FXhigWRouK4wCUP9bhkX8Uvs/Ey5qj3mcNHD4urootiIijQglB+uUEQTNnVYPaYyT7sQPOfpSa+bXR3uBUyfmc5TYvOBQoaK5r4FesfkpsGOzZrKud4W63jQ6udvKoyy5gRgdve8j4kUwc+Lu7nIkmojw6FD6QydqMUY+tOtpXnjODGJp+zZv8L/wt9SUTDEnzWOFsnicqq1tcm+bD5pNH1EWR4erRhzJYq3pXsgoujOE8tDWkyixcptE0Bme0FmHvvUOCDyxv9twaeq8/L1rvdcplQKRI0jLtRXWldHeOLSWpoWcXEw2PLKP2UuPOENG57xZtl/IvO6h9TXWEollzo3IXSBmek1RQBAWjKGnwxUpNRVXXTPR1ZlQikI3vhxRCD6uJyVk68LsmnxCG6DnC8="

env:
  global:
    - TRAVIS_COMPILER: arm-none-eabi-gcc
    - CC: arm-none-eabi-gcc
    - LD: arm-none-eabi-ld
    - CROSS_COMPILE: arm-none-eabi-

script:
  make clean
  # Wraps the compilation with the Build Wrapper to generate configuration (used
  # later by the SonarScanner) into the "bw-output" folder
  - build-wrapper-linux-x86-64 --out-dir bw-output make all
  # And finally run the SonarCloud analysis - read the "sonar-project.properties"
  # file to see the specific configuration
  - sonar-scanner -Dsonar.cfamily.build-wrapper-output=bw-output

cache:
  directories:
    - '$HOME/.sonar/cache'

notifications:
  email: false
